---
import "@/styles/globals.css";
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import Hero from "../components/Hero.tsx";
import Services from "../components/Services.tsx";
import Projects from "../components/Projects.tsx";
import Contact from "../components/Contact.tsx";
import Footer from "../components/Footer.astro";

const seoData = {
  title:
    "DarryS Dev | Desarrollador FullStack para Soluciones de Software a Medida",
  description:
    "Desarrollador de software FullStack experto en crear aplicaciones web de alto rendimiento como E-commerce, CRMs y sistemas logísticos. Convierte tu idea en una realidad digital.",
  keywords:
    "desarrollador fullstack, programador web, desarrollo software, aplicaciones web, react, node.js, typescript, astro, ecommerce, crm, sistemas web, desarrollo a medida, freelance developer, portfolio",
};
---

<Layout {...seoData}>
  <Header />

  <main>
    <Hero client:load />
    <Services client:load />
    <Projects client:load />
    <Contact client:load />
  </main>

  <Footer />
</Layout>

<style>
  html {
    scroll-behavior: smooth;
  }
</style>

<script>
  // Intersection Observer for header background
  const header = document.getElementById("header");
  const hero = document.getElementById("inicio");

  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (!entry.isIntersecting) {
          header?.classList.add("bg-background/95");
          header?.classList.remove("bg-background/80");
        } else {
          header?.classList.remove("bg-background/95");
          header?.classList.add("bg-background/80");
        }
      });
    },
    { rootMargin: "-80px 0px 0px 0px" },
  );

  if (hero) {
    observer.observe(hero);
  }

  // Smooth scrolling for all anchor links
  document.addEventListener('DOMContentLoaded', function() {
    const links = document.querySelectorAll('a[href^="#"]');
    
    links.forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        
        const targetId = this.getAttribute('href').substring(1);
        const targetElement = document.getElementById(targetId);
        
        if (targetElement) {
          const headerHeight = 80;
          const targetPosition = targetElement.offsetTop - headerHeight;
          
          window.scrollTo({
            top: targetPosition,
            behavior: 'smooth'
          });
        }
      });
    });
  });
</script>

<!-- Structured Data for Portfolio -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "CreativeWork",
  "@id": "https://darrysdev.me/#portfolio",
  "name": "Portfolio de DarryS Dev",
  "description": "Portfolio profesional mostrando proyectos de desarrollo web, aplicaciones E-commerce, CRMs y sistemas logísticos",
  "url": "https://darrysdev.me",
  "author": {
    "@type": "Person",
    "name": "DarryS",
    "url": "https://darrysdev.me"
  },
  "workExample": [
    {
      "@type": "CreativeWork",
      "name": "Aplicaciones E-commerce",
      "description": "Desarrollo de tiendas online completas con sistemas de pago integrados"
    },
    {
      "@type": "CreativeWork", 
      "name": "Sistemas CRM",
      "description": "Gestión de relaciones con clientes y automatización de procesos de venta"
    },
    {
      "@type": "CreativeWork",
      "name": "Sistemas Logísticos",
      "description": "Optimización de cadenas de suministro y gestión de inventarios"
    }
  ]
}
</script>
